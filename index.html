<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OCHamcrest: OCHamcrest</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>OCHamcrest </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="contents"></a>
Contents:</h2>
<ul>
<li><a class="el" href="index.html#intro">Introduction</a> </li>
<li><a class="el" href="index.html#platforms">Cocoa and iOS</a> </li>
<li><a class="el" href="index.html#firsttest">My first OCHamcrest test</a> </li>
<li><a class="el" href="index.html#predefined">Predefined matchers</a> </li>
<li><a class="el" href="index.html#sugar">Syntactic sugar</a> </li>
<li><a class="el" href="index.html#custom">Writing custom matchers</a></li>
</ul>
<h2><a class="anchor" id="intro"></a>
Introduction</h2>
<p>OCHamcrest is an Objective-C framework for writing matcher objects, allowing you to declaratively define "match" rules. There are a number of situations where matchers are invaluable, such as UI validation or data filtering, but it is in the area of writing flexible tests that matchers are most commonly used. This tutorial shows you how to use OCHamcrest for unit testing.</p>
<p>When writing tests it is sometimes difficult to get the balance right between overspecifying the test (and making it brittle to changes), and not specifying enough (making the test less valuable since it continues to pass even when the thing being tested is broken). Having a tool that allows you to pick out precisely the aspect under test and describe the values it should have, to a controlled level of precision, helps greatly in writing tests that are "just right." Such tests fail when the behavior of the aspect under test deviates from the expected behavior, yet continue to pass when minor, unrelated changes to the behavior are made.</p>
<h2><a class="anchor" id="platforms"></a>
Cocoa and iOS</h2>
<p>OCHamcrest is supported for both Cocoa and iOS development.</p>
<p><b>Cocoa:</b> </p>
<ul>
<li>Add <b>OCHamcrest.framework</b> to your project. </li>
<li>Add a Copy Files build phase to copy OCHamcrest.framework to your Products Directory. For unit test bundles, make sure this Copy Files phase comes before the Run Script phase that executes tests. </li>
<li>Add <div class="fragment"><pre class="fragment"><span class="preprocessor">#define HC_SHORTHAND</span>
<span class="preprocessor">#import &lt;OCHamcrest/OCHamcrest.h&gt;</span>
</pre></div></li>
</ul>
<p><b>iOS:</b> </p>
<ul>
<li>Add <b>OCHamcrestIOS.framework</b> to your project. </li>
<li>Add <em>"-lstdc++"</em> and <em>"-ObjC"</em> to your "Other Linker Flags". </li>
<li>Add <div class="fragment"><pre class="fragment"><span class="preprocessor">#define HC_SHORTHAND</span>
<span class="preprocessor">#import &lt;OCHamcrestIOS/OCHamcrestIOS.h&gt;</span>
</pre></div></li>
</ul>
<h2><a class="anchor" id="firsttest"></a>
My first OCHamcrest test</h2>
<p>We'll start by writing a very simple Xcode unit test, but instead of using OCUnit's <code>STAssertEqualObjects</code> function, we'll use OCHamcrest's <code>assertThat</code> construct and a predefined matcher:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#import &lt;SenTestingKit/SenTestingKit.h&gt;</span>

<span class="preprocessor">#define HC_SHORTHAND</span>
<span class="preprocessor"></span><span class="preprocessor">#import &lt;OCHamcrest/OCHamcrest.h&gt;</span>

<span class="keyword">@interface </span>BiscuitTest : SenTestCase
@end

@implementation BiscuitTest

- (void)testEquals
{
    Biscuit* theBiscuit = [Biscuit biscuitNamed:@&quot;Ginger&quot;];
    Biscuit* myBiscuit = [Biscuit biscuitNamed:@&quot;Ginger&quot;];
    <a class="code" href="group__integration.html#ga75b04fe22150cca452998ada49d3e458" title="assertThat(actual, matcher) - Asserts that actual value satisfies matcher.">assertThat</a>(theBiscuit, <a class="code" href="group__object__matchers.html#gaed554671d587236694fbb3723fe2f8a4" title="equalTo(object) - Is the object equal to another object, as tested by the -isEqual: method...">equalTo</a>(myBiscuit));
}

<span class="keyword">@end</span>
</pre></div><p>The <a class="el" href="group__integration.html#ga75b04fe22150cca452998ada49d3e458">assertThat</a> function is a stylized sentence for making a test assertion. In this example, the subject of the assertion is the object <code>theBiscuit</code>, which is the first method parameter. The second method parameter is a matcher for <code>Biscuit</code> objects, here a matcher that checks one object is equal to another using the <code>-isEqual</code>: method. The test passes since the <code>Biscuit</code> class defines an <code>-isEqual</code>: method.</p>
<p>OCHamcrest's functions are actually declared with an "HC" package prefix (such as <code>HC_assertThat</code> and <code>HC_equalTo</code>) to avoid name clashes. To make test writing faster and test code more legible, shorthand macros are provided if <code>HC_SHORTHAND</code> is defined before including the OCHamcrest header. For example, instead of writing <a class="el" href="group__integration.html#ga34a6bb24f565e41c864bcbe6538b26fc">HC_assertThat</a>, simply write <a class="el" href="group__integration.html#ga75b04fe22150cca452998ada49d3e458">assertThat</a>.</p>
<h2><a class="anchor" id="predefined"></a>
Predefined matchers</h2>
<p>OCHamcrest comes with a library of useful matchers:</p>
<ul>
<li>
Object <ul>
<li>
<a class="el" href="group__object__matchers.html#gaed554671d587236694fbb3723fe2f8a4">equalTo</a> - tests object equality using <code>-isEqual</code>: </li>
<li>
<a class="el" href="group__object__matchers.html#gacd6e06d272fb61ba31b4aa3f598b3332">hasDescription</a> - tests whether <code>-description</code> satisfies another matcher </li>
<li>
<a class="el" href="group__object__matchers.html#ga684af0672998244dbcf0a4e1467de892">instanceOf</a> - tests object type </li>
<li>
<a class="el" href="group__object__matchers.html#ga9ffdd81537ca99784c8d81bd239f4942">notNilValue</a>, <a class="el" href="group__object__matchers.html#ga5760ec0b6b3c0602d7063a7fc6dcaac9">nilValue</a> - tests for nil </li>
<li>
<a class="el" href="group__object__matchers.html#gae8cfe45f9aee662b08b823587aea8a34">sameInstance</a> - tests object identity using <code>==</code> </li>
</ul>
</li>
<li>
Collections <ul>
<li>
<a class="el" href="group__collection__matchers.html#ga701c368871a218657e07d97bfb8c8e9a">contains</a> - tests whether collection's elements, in order, satisfy a list of matchers </li>
<li>
<a class="el" href="group__collection__matchers.html#gaa0d0c466c5175b7b16356b91136e87b5">containsInAnyOrder</a> - tests whether collection's elements, in any order, satisfy a list of matchers </li>
<li>
<a class="el" href="group__collection__matchers.html#gadafd520091b5ddf350fc4b2fedfdffa5">empty</a> - tests whether collection is empty </li>
<li>
<a class="el" href="group__collection__matchers.html#gab1db6e52a7374ff703e65f6f8d52a509">hasCount</a> - tests whether collection's count satisfies another matcher </li>
<li>
<a class="el" href="group__collection__matchers.html#ga444104ad887a9834dce702f880905db8">hasCountOf</a> - tests whether collection has a given number of elements </li>
<li>
<a class="el" href="group__collection__matchers.html#ga5a789656caea9dad56a6f7f8e21567ba">hasEntries</a> - tests whether dictionary has key-value pairs satisfying a list of matchers </li>
<li>
<a class="el" href="group__collection__matchers.html#ga22cc888ea6cdc18d6a633dd2ba2542a1">hasEntry</a> - tests whether dictionary has a key-value pair satisfying a pair of matchers </li>
<li>
<a class="el" href="group__collection__matchers.html#ga58754aa8b36ae52c05a03c140488a85f">hasKey</a> - tests whether dictionary has a key satisfying another matcher </li>
<li>
<a class="el" href="group__collection__matchers.html#gaf141b74c5177da00f45c49b50f867e52">hasValue</a> - tests whether dictionary has a value satisfying another matcher </li>
<li>
<a class="el" href="group__collection__matchers.html#gab282df09dd90f5ed84d5f2a3974d6c32">hasItem</a> - tests whether any element in collection satisfies another matcher </li>
<li>
<a class="el" href="group__collection__matchers.html#ga924ad71a0c630e0240d12bcd26fc3b26">hasItems</a> - tests whether collection contains any elements satisfying all of a given set of matchers </li>
<li>
<a class="el" href="group__collection__matchers.html#ga4c407805f66f1f6d7241c56b48226478">onlyContains</a> - tests whether collection contains only elements satisfying any of a given set of matchers </li>
</ul>
</li>
<li>
Number <ul>
<li>
<a class="el" href="group__number__matchers.html#ga9adbce4e7c9b6cd16eac1a1e2d77450d">closeTo</a> - tests whether primitive double is close to a given value </li>
<li>
<b>equalTo&lt;TypeName&gt;</b> - tests whether primitive number equals given value, with separate function defined for each numeric type, such as <a class="el" href="group__primitive__number__matchers.html#ga515e8dfe0c66bdccb78066963562472d">equalToInt</a> for <code>int</code> </li>
<li>
<a class="el" href="group__number__matchers.html#ga7c5f431d6a8a2519701dfbdb61234b34">greaterThan</a> - tests NSNumber ordering </li>
<li>
<a class="el" href="group__number__matchers.html#ga301c155b9c48f70c31ed11e660bb5b43">greaterThanOrEqualTo</a> - tests NSNumber ordering </li>
<li>
<a class="el" href="group__number__matchers.html#ga3ab214e531e753217fc893a07b2c6dcf">lessThan</a> - tests NSNumber ordering </li>
<li>
<a class="el" href="group__number__matchers.html#ga8e5afd70aaff19c9cbbcd8e10d664fb0">lessThanOrEqualTo</a> - tests NSNumber ordering </li>
</ul>
</li>
<li>
Text <ul>
<li>
<a class="el" href="group__text__matchers.html#ga35821bba7e5cd4e9c2d8b098b815864c">containsString</a> - tests whether string contains a given string </li>
<li>
<a class="el" href="group__text__matchers.html#ga180075d9487555730ba5772e8cf871f0">endsWith</a> - tests whether string ends with a given string </li>
<li>
<a class="el" href="group__text__matchers.html#ga8004252f4788147dc2ff33cd0425960b">equalToIgnoringCase</a> - tests string equality ignoring case </li>
<li>
equalToIgnoringWhitespace - test string equality ignoring differences in runs of whitespace </li>
<li>
<a class="el" href="group__text__matchers.html#ga7933ad8e9864c8958618ff3b5655cb78">startsWith</a> - tests whether string starts with a given string </li>
<li>
<a class="el" href="group__text__matchers.html#ga80483d7853374b03a8e0f9205269b333">stringContainsInOrder</a> - tests whether string contains given substrings, in order </li>
</ul>
</li>
<li>
Logical <ul>
<li>
<a class="el" href="group__logical__matchers.html#ga2731c6013c86273d7418dcbb95471422">allOf</a> - matches if all matchers match (short-circuits like C's <code>&amp;&amp;</code>) </li>
<li>
<a class="el" href="group__logical__matchers.html#ga23c828dbcdc519a0014807ffa9183d14">anyOf</a> - matches if any matchers match (short-circuits like C's <code>||</code>) </li>
<li>
<a class="el" href="group__logical__matchers.html#ga46b873bc5b4acc4eabc88b72a08ce750">anything</a> - always matches, useful in collection matchers when you don't care about a particular element </li>
<li>
<a class="el" href="group__logical__matchers.html#ga9fce91422af9e0ceee72859379886c06">isNot</a> - matches if the wrapped matcher doesn't match and vice versa </li>
</ul>
</li>
<li>
Decorator <ul>
<li>
<a class="el" href="group__decorator__matchers.html#ga2c2fb9ad98b99af6c08159f4a8fd9ac0">describedAs</a> - decorator to add custom failure description </li>
<li>
<a class="el" href="group__decorator__matchers.html#ga9870e0caa2f8e3e5700c4cbb21d73c07">is</a> - decorator to improve readability - see <a class="el" href="index.html#sugar">Syntactic sugar</a>, below </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="sugar"></a>
Syntactic sugar</h2>
<p>OCHamcrest strives to make your tests as readable as possible. For example, the <a class="el" href="group__decorator__matchers.html#ga9870e0caa2f8e3e5700c4cbb21d73c07">is</a> matcher is a wrapper that doesn't add any extra behavior to the underlying matcher. The following assertions are all equivalent:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="group__integration.html#ga75b04fe22150cca452998ada49d3e458" title="assertThat(actual, matcher) - Asserts that actual value satisfies matcher.">assertThat</a>(theBiscuit, <a class="code" href="group__object__matchers.html#gaed554671d587236694fbb3723fe2f8a4" title="equalTo(object) - Is the object equal to another object, as tested by the -isEqual: method...">equalTo</a>(myBiscuit));
<a class="code" href="group__integration.html#ga75b04fe22150cca452998ada49d3e458" title="assertThat(actual, matcher) - Asserts that actual value satisfies matcher.">assertThat</a>(theBiscuit, <a class="code" href="group__decorator__matchers.html#ga9870e0caa2f8e3e5700c4cbb21d73c07" title="is(match) - Decorates another matcher, or provides a shortcut to the frequently used is(equalTo(x))...">is</a>(<a class="code" href="group__object__matchers.html#gaed554671d587236694fbb3723fe2f8a4" title="equalTo(object) - Is the object equal to another object, as tested by the -isEqual: method...">equalTo</a>(myBiscuit)));
<a class="code" href="group__integration.html#ga75b04fe22150cca452998ada49d3e458" title="assertThat(actual, matcher) - Asserts that actual value satisfies matcher.">assertThat</a>(theBiscuit, <a class="code" href="group__decorator__matchers.html#ga9870e0caa2f8e3e5700c4cbb21d73c07" title="is(match) - Decorates another matcher, or provides a shortcut to the frequently used is(equalTo(x))...">is</a>(myBiscuit));
</pre></div><h2><a class="anchor" id="custom"></a>
Writing custom matchers</h2>
<p>A key feature of OCHamcrest is its extensibility. See <a class="el" href="custom-matchers.html">Writing custom matchers</a> for an example of how to write your own matchers. </p>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Aug 7 2011 17:39:01 for OCHamcrest by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
